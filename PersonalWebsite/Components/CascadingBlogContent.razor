@implements IDisposable

<CascadingValue Value="BlogsMonitor.CurrentValue.ToDictionary(x => x.Slug, x => x)">
    @ChildContent
</CascadingValue>

@code {
    private IDisposable? _changeListener;

    [Inject]
    private IOptionsMonitor<List<BlogEntryMeta>> BlogsMonitor { get; set; } = default!;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    public void Dispose()
    {
        _changeListener?.Dispose();
        GC.SuppressFinalize(this);
    }

    protected override void OnInitialized()
    {
        _changeListener = BlogsMonitor.OnChange(_ => StateHasChanged());
    }
}